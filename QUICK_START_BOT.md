# üöÄ Quick Start - Telegram Bot

## –®–∞–≥ 1: –°–æ–∑–¥–∞–π –±–æ—Ç–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π Telegram –∏ –Ω–∞–π–¥–∏ `@BotFather`
2. –û—Ç–ø—Ä–∞–≤—å `/newbot`
3. –í–≤–µ–¥–∏ –∏–º—è: `SatWave Bot` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
4. –í–≤–µ–¥–∏ username: `satwave_analysis_bot` (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π, –¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`)
5. **–°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω** ‚Äî –æ–Ω –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
   ```
   1234567890:ABCdefGHIjklMNOpqrsTUVwxyz-123456789
   ```

## –®–∞–≥ 2: –î–æ–±–∞–≤—å —Ç–æ–∫–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `.env` (–æ–Ω —É–∂–µ —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞) –∏ –∑–∞–º–µ–Ω–∏ —Å—Ç—Ä–æ–∫—É:

```bash
TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN_HERE
```

–Ω–∞

```bash
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz-123456789
```

(–í—Å—Ç–∞–≤—å —Å–≤–æ–π —Ç–æ–∫–µ–Ω –æ—Ç BotFather)

## –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

## –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞

```bash
python -m satwave.adapters.bot.telegram_bot
```

–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å:
```
INFO - Starting Telegram bot...
INFO - Bot started polling
```

## –®–∞–≥ 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π

1. –ù–∞–π–¥–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram (–ø–æ username)
2. –û—Ç–ø—Ä–∞–≤—å `/start`
3. –û—Ç–ø—Ä–∞–≤—å –ª—é–±–æ–µ —Ñ–æ—Ç–æ
4. –û—Ç–ø—Ä–∞–≤—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é (–Ω–∞–∂–º–∏ —Å–∫—Ä–µ–ø–∫—É ‚Üí Location ‚Üí Share My Location)
5. –ü–æ–ª—É—á–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üéâ

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏?

```
Telegram Bot
    ‚Üì (–ø–æ–ª—É—á–∞–µ—Ç —Ñ–æ—Ç–æ + –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é)
handlers.py
    ‚Üì (–≤—ã–∑—ã–≤–∞–µ—Ç)
PhotoAnalysisService
    ‚Üì (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç)
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
- –ó–∞–ø—É—Å–∫–∞–µ—Ç ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–ø–æ–∫–∞ stub)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î (–ø–æ–∫–∞ in-memory)
    ‚Üì (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
Telegram Bot
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–∏–ø–æ–º –º—É—Å–æ—Ä–∞
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```
src/satwave/adapters/bot/
‚îú‚îÄ‚îÄ telegram_bot.py     # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞ (TelegramBot)
‚îî‚îÄ‚îÄ handlers.py         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:
                        #   - /start, /help
                        #   - handle_photo() - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ
                        #   - handle_location() - –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
                        #   - process_analysis() - –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ BotFather

1. –û—Ç–ø—Ä–∞–≤—å @BotFather –∫–æ–º–∞–Ω–¥—É `/setcommands`
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
3. –û—Ç–ø—Ä–∞–≤—å:
```
start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
help - –ü–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å
```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ

```
/setdescription
```

–ü—Ä–∏–º–µ—Ä:
```
SatWave Bot –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ –º—É—Å–æ—Ä–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ—Ç—Ö–æ–¥–æ–≤. 
–û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é - –ø–æ–ª—É—á–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞!
```

## Troubleshooting

### –û—à–∏–±–∫–∞: "Token is invalid"
- –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ `.env`
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω (`python -m satwave.adapters.bot.telegram_bot`)
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### "Duplicate location error"
- –≠—Ç–∞ –ª–æ–∫–∞—Ü–∏—è —É–∂–µ –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞
- –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –º–µ—Å—Ç–∞ (–¥–∞–ª—å—à–µ 50 –º–µ—Ç—Ä–æ–≤)

### –ë–æ—Ç –ø–æ–ª—É—á–∏–ª —Ñ–æ—Ç–æ, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª
- –û—Ç–ø—Ä–∞–≤—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é! –ë–æ—Ç –∂–¥—ë—Ç –∏ —Ñ–æ—Ç–æ, –∏ –ª–æ–∫–∞—Ü–∏—é

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –±–∞–∑–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞ –º–æ–∂–µ—à—å:
- –ó–∞–ø—É—Å—Ç–∏—Ç—å API –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ: `python -m satwave.main`
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë —á–µ—Ä–µ–∑ Docker: `docker-compose up`
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å API docs: http://localhost:8000/docs
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω–æ–π ML-–º–æ–¥–µ–ª—å—é (–∑–∞–º–µ–Ω–∏—Ç—å stub)
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å PostgreSQL (–∑–∞–º–µ–Ω–∏—Ç—å in-memory –ë–î)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/](docs/)

- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞](docs/bot/setup.md) - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](docs/bot/user-flows.md) - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ—Ç–æ–º
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](docs/bot/development.md) - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [API Overview](docs/api/overview.md) - Webhook API
- [ADR](docs/adr/) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è —Ä–∞–±–æ—Ç–∞–µ—Ç Telegram –±–æ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ —Ñ–æ—Ç–æ –º—É—Å–æ—Ä–∞! üéâ**

